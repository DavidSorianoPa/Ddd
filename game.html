<!DOCTYPE html> <html lang="es"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> <title>Minish Cap Lite: La Gran Aventura</title> <script src="https://cdn.tailwindcss.com"></script> <style> body { touch-action: none; overflow: hidden; background-color: #2C3E50; } canvas { display: block; margin: 0 auto; image-rendering: pixelated; max-width: 100%; touch-action: none; } .controls { position: fixed; bottom: 20px; left: 0; right: 0; display: flex; justify-content: center; gap: 20px; padding: 10px; background: rgba(0,0,0,0.5); } .dpad { display: grid; grid-template-areas: ". up ." "left down right"; gap: 8px; } .dpad button { width: 60px; height: 60px; border-radius: 50%; background: #34495E; color: white; font-size: 24px; border: 2px solid #7F8C8D; } .action-buttons { display: flex; gap: 15px; } .action-buttons button { width: 60px; height: 60px; border-radius: 50%; background: #E74C3C; color: white; font-size: 20px; border: 2px solid #C0392B; } #menuBtn { background: #3498DB; border-color: #2980B9; } </style> </head> <body> <div class="game-container"> <h1 class="text-2xl font-bold mb-4 text-white text-center">Minish Cap Lite: La Gran Aventura</h1> <canvas id="gameCanvas"></canvas> <div class="status-bar" id="statusBar"> <!-- ... (mantener el mismo status-bar) ... --> </div> <div class="game-info" id="gameInfo"> <!-- ... (mantener el mismo game-info) ... --> </div> <div class="instructions"> <!-- ... (mantener las instrucciones) ... --> </div> </div> <!-- Controles Táctiles --> <div class="controls"> <div class="dpad"> <button id="upBtn">▲</button> <button id="leftBtn">◄</button> <button id="downBtn">▼</button> <button id="rightBtn">►</button> </div> <div class="action-buttons"> <button id="attackBtn">⚔️</button> <button id="spellBtn">✨</button> <button id="menuBtn">≡</button> </div> </div> <script> // Variables de control táctil let touchUp = false, touchDown = false, touchLeft = false, touchRight = false; // Modificar event listeners existentes document.addEventListener('keydown', async (e) => { // ... (mantener el código original) ... }); // Nuevos event listeners táctiles document.getElementById('upBtn').addEventListener('touchstart', e => { e.preventDefault(); touchUp = true; player.direction = 'up'; }); document.getElementById('downBtn').addEventListener('touchstart', e => { e.preventDefault(); touchDown = true; player.direction = 'down'; }); document.getElementById('leftBtn').addEventListener('touchstart', e => { e.preventDefault(); touchLeft = true; player.direction = 'left'; }); document.getElementById('rightBtn').addEventListener('touchstart', e => { e.preventDefault(); touchRight = true; player.direction = 'right'; }); // Botones de acción document.getElementById('attackBtn').addEventListener('touchstart', e => { e.preventDefault(); handlePlayerAttack(); }); document.getElementById('spellBtn').addEventListener('touchstart', e => { e.preventDefault(); castSpell(); }); document.getElementById('menuBtn').addEventListener('touchstart', e => { e.preventDefault(); showMainMenu(); }); // Detener movimiento al soltar ['touchend', 'touchcancel'].forEach(event => { document.getElementById('upBtn').addEventListener(event, () => touchUp = false); document.getElementById('downBtn').addEventListener(event, () => touchDown = false); document.getElementById('leftBtn').addEventListener(event, () => touchLeft = false); document.getElementById('rightBtn').addEventListener(event, () => touchRight = false); }); // Modificar la función update function update() { if (isGamePaused) return; // ... (mantener el resto del update) ... // Lógica de Movimiento Táctil let newX = player.x; let newY = player.y; if (touchUp) newY--; if (touchDown) newY++; if (touchLeft) newX--; if (touchRight) newX++; // Validar movimiento if (newX >= 0 && newX < MAP_WIDTH_TILES && newY >= 0 && newY < MAP_HEIGHT_TILES) { const targetTileType = currentMap[newY][newX]; if (targetTileType === 1) { showMessage("¡Es un muro!"); player.isMoving = false; return; } else if (targetTileType === 4) { // ... (mantener lógica de puerta) ... } player.x = newX; player.y = newY; } // ... (resto del update) ... } // Ajustar el tamaño del canvas para móviles function resizeCanvas() { const container = document.querySelector('.game-container'); const maxWidth = Math.min(window.innerWidth - 40, 800); const maxHeight = window.innerHeight * 0.7; const scale = Math.min( maxWidth / (MAP_WIDTH_TILES * TILE_SIZE), maxHeight / (MAP_HEIGHT_TILES * TILE_SIZE) ); canvas.width = MAP_WIDTH_TILES * TILE_SIZE * scale; canvas.height = MAP_HEIGHT_TILES * TILE_SIZE * scale; } // Modificar la inicialización window.onload = function() { resizeCanvas(); window.addEventListener('resize', resizeCanvas); loadLevel(0); showMainMenu(); gameLoop(); }; </script> </body> </html>